<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="author" content="Crisley">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Index - Ecommerce</title>

    <style>
        #container-resultado {
        display: none;
        }
    </style>

</head>

<body>

    <header class="main-header">

        <div class="container">

            <div class="main-logo">
                <a href="#">
                    <img src="assets/img/medium.png" alt="">
                </a>
            </div>

            <div class="main-account">
                <a href="#" target="_blank">minha conta</a>
                <a href="#" target="_blank">login</a>
            </div>

            <div class="main-search">
                <form action="#">
                    <input type="search" id="frm-busca" name="" placeholder="PESQUISAR">
                </form>
            </div>
            
            <div id="container-resultado">
                <h2>Resultado de  busca</h2>
                <div id="sugestoes-produtos"></div>
                <div id="resultado-busca"></div>
            </div>

            </div>
        </div>
    </header>

    <section class="main-nav">
        <div class="container">
            <nav>
                <ul class="main-nav-list">
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                    <li class="item">
                        <a href="#">Link</a>
                    </li>
                </ul>
            </nav>
        </div>
    </section>

    <section class="main-banner">
        <div class="container">
            <div class="main-banner-img">
                <figure>
                    <img src="assets/img/produto.png" alt="">
                </figure>
            </div>

            <div class="main-banner-content-text">
                <h2>TÍTULO</h2>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusamus, quo maxime. Ab animi, officiis eaque
                    nesciunt odio consequuntur aut! Quae laboriosam expedita earum facere, totam quia commodi repellendus
                    necessitatibus consectetur.</p>

                <a href="#">ver mais</a>
            </div>
        </div>

    </section>

    <section class="main-news">
        <div class="container">

            <h2>Novidades</h2>

            <ul class="main-news-list">
                <a href="#">
                    <li class="item">
                        <figure>
                            <img src="assets/img/produto2.jpg" alt="Produto" title="Produto">
                        </figure>
                        <h3>Produto A</h3>
                        <p>R$ 100,00</p>
                        <p>10x de <span>R$ 10,00</span> sem juros</p>
                    </li>
                </a>

                <a href="#">
                    <li class="item">
                        <figure>
                            <img src="assets/img/produto3.jpg" alt="Produto" title="Produto">
                        </figure>
                        <h3>Produto A</h3>
                        <p>R$ 100,00</p>
                        <p>10x de <span>R$ 10,00</span> sem juros</p>
                    </li>
                </a>

                <a href="#">
                    <li class="item">
                        <figure>
                            <img src="assets/img/produto4.jpg" alt="Produto" title="Produto">
                        </figure>
                        <h3>Produto A</h3>
                        <p>R$ 100,00</p>
                        <p>10x de <span>R$ 10,00</span> sem juros</p>
                    </li>
                </a>
            </ul>
        </div>
    </section>


    <section class="main-most-sold">
        <div class="container">

            <h2>Produtos mais vendidos</h2>

            <ul class="main-most-sold-list">
                <a href="#">
                    <li class="item">
                        <figure>
                            <img src="assets/img/produto5.png" alt="Produto" title="Produto">
                        </figure>
                        <h3>Produto A</h3>
                        <p>R$ 100,00</p>
                        <p>10x de <span>R$ 10,00</span> sem juros</p>
                    </li>
                </a>

                <a href="#">
                    <li class="item">
                        <figure>
                            <img src="assets/img/produto10.png" alt="Produto" title="Produto">
                        </figure>
                        <h3>Produto A</h3>
                        <p>R$ 100,00</p>
                        <p>10x de <span>R$ 10,00</span> sem juros</p>
                    </li>
                </a>

                <a href="#">
                    <li class="item">
                        <figure>
                            <img src="assets/img/produto.png" alt="Produto" title="Produto">
                        </figure>
                        <h3>Produto A</h3>
                        <p>R$ 100,00</p>
                        <p>10x de <span>R$ 10,00</span> sem juros</p>
                    </li>
                </a>
            </ul>
        </div>
    </section>

    <section class="main-bottom">
        <div class="container">
            <div class="main-bottom-divide">
                <h4>Institucional</h4>
                <ul>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                </ul>
            </div>

            <div class="main-bottom-divide">
                <h4>Minha Conta</h4>
                <ul>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Menu</a></li>
                </ul>
            </div>

            <div class="main-bottom-divide">
                <h4>Assine nossa newsletter</h4>
                <form action="#">
                    <input type="text" name="" id="email" placeholder="Assinar">
                    <button onclick="myFunction()">OK</button>
                </form>
                

                <p id="demo"></p>

                <p>Siga a nossa loja</p>
                <ul class="main-bottom-social">
                    <li>
                        <a href="#">
                            <figure>
                                <img src="assets/img/facebook.png" alt="Facebook" title="Facebook">
                            </figure>
                        </a>

                        <a href="#">
                            <figure>
                                <img src="assets/img/instagram.png" alt="Instagram" title="Instagram">
                            </figure>
                        </a>

                        <a href="#">
                            <figure>
                                <img src="assets/img/twitter.png" alt="Twitter" title="Twitter">
                            </figure>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <footer class="main-footer">
        Todos os direitos reservador.
    </footer>

    <script src="jquery-3.3.1.min.js"> </script>
    <script src="js/jquery.autocomplete.min.js"></script>
    <script src="jquery.maskedinput.min.js"></script> 
    

    <script>

        var $debug = true;

        var $campo_busca = document.getElementById('campo-busca');
        var $container_resultados = document.getElementById('container-resultado');
        var $sugestoes_produtos = document.getElementById('sugestoes-produtos');
        var $resultado_busca = document.getElementById('resultado-busca');

        //validação do email

        function myFunction() {
            var inpObj = document.getElementById("#email");
            if (!inpObj.checkValidity()) {
                document.getElementById("demo").innerHTML = inpObj.validationMessage;
            } else {
                document.getElementById("demo").innerHTML = ("email inválido")
            }

        }
        
        var $ar_sugestoes_produtos = [
            "Detergente",
            "Café",
            "Erva",
            "Cerveja"
        ];

        // array de sugestões de produto
        var $ar_resultado_busca  = [
            {
                "nome" : "Produto A",
                "descrição" : "texto texto texto texto",
                "link" : "http://compasso.com.br ",
                "preco":  100.00
            },
            {
                "nome" : "Produto B",
                "descrição" : "outro texto",
                "link" : "http://compasso.com.br ",
                "preco": 100.00
            },
            {
                "nome" : "Produto C",
                "descrição" : "bla bla bla",
                "link" : "http://compasso.com.br ",
                "preco": 100.00
            },
            {
                "nome" : "Produto D",
                "descrição" : "texto texto texto texto",
                "link" : "http://compasso.com.br ",
                "preco":  100.00
            },
            {
                "nome" : "Produto D",
                "descrição" : "outro texto",
                "link" : "http://compasso.com.br ",
                "preco": 100.00
            },
            {
                "nome" : "Produto E",
                "descrição" : "bla bla bla",
                "link" : "http://compasso.com.br ",
                "preco": 100.00
            }

        ];

        function cl($msg){
            if($debug) console.log($msg);
        };

        function renderizaSugestoes(){
            var $retorno = "";

            //for(var $i = 0; $i < $ar_sugestoes_produtos.length; $i++ )
            for(var $i in $ar_sugestoes_produtos){
            //cl($ar_sugestoes_produtos[$i]);
                $retorno += "<p>"+$ar_sugestoes_produtos[$i]+"</p>"  
            };
        
            //cl($retorno);
            $sugestoes_produtos.innerHTML = $retorno; 
        };


        function renderizaResultadoBusca(){
            var $retorno = "";

            for(var $i in $ar_resultado_busca){
                $retorno += "<div>"+
                            "<h3>"+$ar_resultado_busca[$i].nome+"</h3>"+
                            "<p>" +$ar_resultado_busca[$i].descrição+"<p>"+
                            "<p>" +$ar_resultado_busca[$i].preco+"<p>"+
                            "<a href="+$ar_resultado_busca[$i].link+">Veja mais</a>"+
                            "</div>";
            }
            $resultado_busca.innerHTML = $retorno;    

        };

        
        
        $campo_busca.onfocus = function(){
            cl('entrou no campo');
            $container_resultados.style.display = "block";

            if(this.value.length === 0){
                cl('exibe sugestoes esconde lista');
                $sugestoes_produtos.style.display = "block";
                $resultado_busca.style.display = "none";
            }else{
                cl('exibe lista esconde sugestoes');
                $sugestoes_produtos.style.display = "none";
                $resultado_busca.style.display = "block";
            }
        };


        $campo_busca.onblur = function(){
            cl('saiu do campo');
            if(this.value.length === 0){
                $container_resultados.style.display = "none";
            };

        };

        
        $campo_busca.onkeyup = function(){
            if(this.value.length === 0){
                cl('exibe sugestoes esconde lista');
                $sugestoes_produtos.style.display = "block";
                $resultado_busca.style.display = "none";
            }else{
                cl('exibe lista esconde sugestoes');
                $sugestoes_produtos.style.display = "none";
                $resultado_busca.style.display = "block";
            }
        };


        checkMail();
        renderizaSugestoes();
        renderizaResultadoBusca();            

    </script>
    

</body>

</html>