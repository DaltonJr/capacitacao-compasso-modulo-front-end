<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>
            #container-resultado {
            display: none;
        }
    </style>

</head>
<body>

    <form action="" class="js-teste" id="frm-busca">
        <input type="search" id="campo-busca">
    </form>

    <div id="container-resultado">
        <h2>Resultado de  busca</h2>
        <div id="sugestoes-produtos"></div>
        <div id="resultado-busca"></div>
    </div>
    
    <script>
        "use strict"; //obriga a inicializar todas as variáveis.

        var $debug = true;

        var $campo_busca = document.getElementById('campo-busca');
        var $container_resultados = document.getElementById('container-resultado');
        var $sugestoes_produtos = document.getElementById('sugestoes-produtos');
        var $resultado_busca = document.getElementById('resultado-busca');
 
        var $ar_sugestoes_produtos = [
            "Detergente",
            "Café",
            "Erva",
            "Cerveja"
        ];

         // array de sugestões de produto
        var $ar_resultado_busca = [
            {
                "nome" : "Computador Dell",
                "descrição" : "texto texto texto texto",
                "img" : "https://candyhero.com/__public/images/products/c-gallery-9-53/hersheys-cookies-n-creme.jpg",
                "link" : "http://compasso.com.br ",
                "preco": 10.5
            },
            {
                "nome" : "Notebook HP",
                "descrição" : "outro texto",
                "img" : "https://candyhero.com/__public/images/products/c-gallery-9-53/hersheys-cookies-n-creme.jpg",
                "link" : "http://compasso.com.br ",
                "preco": 29.5
            },
            {
                "nome" : "ASUS",
                "descrição" : "bla bla bla",
                "img" : "https://candyhero.com/__public/images/products/c-gallery-9-53/hersheys-cookies-n-creme.jpg",
                "link" : "http://compasso.com.br ",
                "preco": 19.5
            }

        ];

        cl($ar_resultado_busca);
             

        function cl($msg){
            if($debug) console.log($msg);
        };

        function renderizaSugestoes(){
            var $retorno = "";

            //for(var $i = 0; $i < $ar_sugestoes_produtos.length; $i++ )
            for(var $i in $ar_sugestoes_produtos){
            //cl($ar_sugestoes_produtos[$i]);
                $retorno += "<p>"+$ar_sugestoes_produtos[$i]+"</p>"  
            };
        
            //cl($retorno);
            $sugestoes_produtos.innerHTML = $retorno; 
        };


        function renderizaResultadoBusca(){
            var $retorno = "";

            for(var $i in $ar_resultado_busca){
                $retorno += "<div>"+
                            "<h3>"+$ar_resultado_busca[$i].nome+"</h3>"+
                            "<img src='"+$ar_resultado_busca[$i].img+"'>"+
                            "<p>" +$ar_resultado_busca[$i].descrição+"<p>"+
                            "<p>" +$ar_resultado_busca[$i].preco+"<p>"+
                            "<a href="+$ar_resultado_busca[$i].link+">Veja mais</a>"+
                            "</div>";
            }
            $resultado_busca.innerHTML = $retorno;    

        };

        $campo_busca.onfocus = function(){
            cl('entrou no campo');
            $container_resultados.style.display = "block";

            if(this.value.length === 0){
                cl('exibe sugestoes esconde lista');
                $sugestoes_produtos.style.display = "block";
                $resultado_busca.style.display = "none";
            }else{
                cl('exibe lista esconde sugestoes');
                $sugestoes_produtos.style.display = "none";
                $resultado_busca.style.display = "block";
            }
        };


        $campo_busca.onblur = function(){
            cl('saiu do campo');
            if(this.value.length === 0){
                $container_resultados.style.display = "none";
            };

        };

        $campo_busca.onkeyup = function(){
            if(this.value.length === 0){
                cl('exibe sugestoes esconde lista');
                $sugestoes_produtos.style.display = "block";
                $resultado_busca.style.display = "none";
            }else{
                cl('exibe lista esconde sugestoes');
                $sugestoes_produtos.style.display = "none";
                $resultado_busca.style.display = "block";
            }
        };

        renderizaSugestoes();
        renderizaResultadoBusca();    

    </script>

</body>
</html>